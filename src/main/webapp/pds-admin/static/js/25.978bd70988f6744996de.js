webpackJsonp([25],{"2kGh":function(t,e){},Sq6v:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("8uth"),l=s.n(a),i=s("5JDp");var r={deliveryConstruct:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={buyId:"",buyPrice:"",goodsCategory:"",goodsModel:"",goodsName:"",goodsUnit:"",sortOutNum:"",tradeId:""},s=20-t.length,a=0;a<s;a++)t.push(e);return t}},o={data:function(){return{request:new i.a,options:this.$dic.buySeqOptions,shipfee:0,pageSize:20,pageNo:1,total:0,totalPage:0,totalKinds:0,list:[],trucks:[],truckIndex:0}},props:{value:Object,buySeq:String,deliveryDate:String},watch:{value:{handler:function(t,e){t.shipFee||(t.shipFee=0),this.selfBuyerOrderList(t.buyerId)},immediate:!0}},computed:{tableList:function(){var t=[];return this.list.forEach(function(e){e.buyPrice||e.goodsNum?e.charge=(e.sortOutNum*e.buyPrice).toFixed(2):e.charge="",t.push(e)}),t},totalPrice:function(){var t=0;return this.tableList.forEach(function(e){t+=+e.charge||0}),t.toFixed(2)},totalCharge:function(){return(+this.totalPrice+ +this.value.shipFee).toFixed(2)},totalNum:function(){var t=0;return this.tableList.forEach(function(e){e.sortOutNum&&(t+=+e.sortOutNum)}),t}},methods:{exportExcel:function(){l.a.getExcel("ddd","","送货单.xls","bb")},checkSupplierList:function(){this.fetchBuyOrderList()},changeNo:function(t){console.log(t),this.pageNo=t,this.selfBuyerOrderList()},printTable:function(){var t=document.getElementById("adasd").innerHTML;window.document.body.innerHTML=t,window.print()},selfBuyerOrderList:function(t){var e=this;this.request.selfBuyerOrderList({buyerId:t||this.value.id,deliveryDate:this.deliveryDate,buySeq:this.buySeq,truckNo:this.truckNo,pageSize:this.pageSize,pageNo:this.pageNo}).then(function(t){200==t.code?(e.totalKinds=t.list.length,e.list=r.deliveryConstruct(t.list),e.total=t.totalRows,e.totalPage=t.totalPage):e.$message.warning(t.msg)})}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.list?s("div",{attrs:{id:"adasd"}},[s("div",{staticStyle:{"text-align":"center","font-size":"14px",color:"#bbb","padding-bottom":"10px"}},[t._v("\n            重庆"+t._s(t.$constant.merchantName)+"配农产品配送有限公司\n        ")]),t._v(" "),s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("table",{attrs:{border:"1",id:"ddd"}},[s("caption",[t._v("采购商 - 提货单")]),t._v(" "),s("tbody",[s("tr",[s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("采购商名称")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.value.buyerName))]),t._v(" "),s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("提货日期")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.deliveryDate))])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("提货批次")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.options[t.buySeq].label))]),t._v(" "),s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("联系人")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.contact))])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("提货地址")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.value.address))]),t._v(" "),s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("联系电话")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.telephone))])]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._l(t.tableList,function(e,a){return s("tr",{key:a},[s("th",{staticClass:"bc-yellow"},[t._v(t._s(a+1))]),t._v(" "),s("td",[t._v(t._s(e.tradeId))]),t._v(" "),s("td",[t._v(t._s(e.goodsCategory))]),t._v(" "),s("td",[t._v(t._s(e.goodsName))]),t._v(" "),s("td",[t._v(t._s(e.goodsModel))]),t._v(" "),s("td",[t._v(t._s(e.goodsUnit))]),t._v(" "),s("td",[t._v(t._s(e.sortOutNum))]),t._v(" "),s("td",[t._v(t._s(e.buyPrice))]),t._v(" "),s("td",[t._v(t._s(+e.charge||""))])])}),t._v(" "),t._m(2),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow",attrs:{colspan:"2",rowspan:"2"}},[t._v("合计")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("商品种类")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.totalKinds))]),t._v(" "),s("th",{staticClass:"bc-yellow",attrs:{colspan:"2",rowspan:"1"}},[t._v("本页小计（元）")]),t._v(" "),s("td",{attrs:{colspan:"2",rowspan:"1"}},[t._v(t._s(t.totalCharge))])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow"},[t._v("采购数量")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.totalNum))]),t._v(" "),s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("应收总账款（元）")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.totalAmount.toFixed(2)))])])],2)]),t._v(" "),s("div",{staticClass:"padRight"},[t._v("第一联白（记账联） 第二联粉（采购商留存）")])]),t._v(" "),t._m(3),t._v(" "),s("div",{staticStyle:{"text-align":"center","font-size":"14px",color:"#bbb"}},[t._v("\n            第"+t._s(t.pageNo)+"页-共"+t._s(t.totalPage)+"页\n        ")])]):t._e(),t._v(" "),s("div",[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":20,total:t.total},on:{"current-change":t.changeNo}})],1),t._v(" "),s("a",{attrs:{id:"bb"},on:{click:t.exportExcel}},[t._v("导出excel")]),t._v(" "),s("a",{attrs:{href:""},on:{click:t.printTable}},[t._v("打印")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"9"}},[this._v(" ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",{staticClass:"bc-yellow"},[t._v("序号")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("提货单号")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("商品分类")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("商品名称")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("规格")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("单位")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("供应数量")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("单价（元）")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("应收款项（元）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"9"}},[this._v(" ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("div",{staticClass:"footer-img"},[s("img",{attrs:{src:"http://haohanshop-file.oss-cn-beijing.aliyuncs.com/merchantFiles/df52d9b3b17643f6916c7d27279a268d/00/20181107/15415868614447adD.png",alt:""}}),t._v(" "),s("p",[t._v("关注公众号，自助下单")])]),t._v(" "),s("div",{staticClass:"right"},[s("div",[s("p",[t._v("♦ 请确保清单上物品信息与实际发出物品的信息相符合；")]),t._v(" "),s("p",[t._v("♦ 如您对本次所提货物有任何意见和建议，请联系我们：4000-562-180。")]),t._v(" "),s("p",[t._v("♦ 请在确认提货单内容均为正确且属实后，进行签字并给予系统评价。")])]),t._v(" "),s("div",{staticClass:"footer-sign"},[s("div",[t._v("提货人：")]),t._v(" "),s("div",[t._v("日期：")])])])])}]};var c={data:function(){return{request:new i.a,buySeq:"0",options:this.$dic.buySeqOptions,dialogTableVisible:!1,deliveryTableVisible:!1,deliveryTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),orderList:[],trucks:[],truckNo:"",deliveryTitle:{},detail:{},deliveryList:[]}},components:{vDetail:s("C7Lr")(o,n,!1,function(t){s("2kGh")},"data-v-2a3238f5",null).exports},watch:{delivery:{handler:function(){},deep:!0}},created:function(){this.selfOrderList()},methods:{handleTableClick:function(t,e){this.fetchSumList(t.buyId)},checkSupplierList:function(){this.selfOrderList()},handleDetailClick:function(t,e){this.detail=t,this.deliveryTableVisible=!0},selfOrderList:function(){var t=this;this.request.selfOrderList({deliveryDate:this.deliveryTime,buySeq:this.buySeq,truckNo:this.truckNo}).then(function(e){200==e.code?t.orderList=e.ext:t.orderList=[]})}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"title"},[s("div",[s("div",{staticClass:"block"},[s("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","default-value":new Date,placeholder:"选择日期"},model:{value:t.deliveryTime,callback:function(e){t.deliveryTime=e},expression:"deliveryTime"}})],1)]),t._v(" "),s("div",[t._v("批次:"),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.buySeq,callback:function(e){t.buySeq=e},expression:"buySeq"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:t.checkSupplierList}},[t._v("查询")])],1)]),t._v(" "),s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,border:""}},[s("el-table-column",{attrs:{prop:"buyerName",label:"采购商名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"contact",label:"联系人",width:"100px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"telephone",label:"联系电话",width:"100px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),s("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.handleDetailClick(e.row,e.$index)}}},[t._v("自提单明细")])]}}])})],1),t._v(" "),s("el-dialog",{attrs:{title:"自提单",visible:t.deliveryTableVisible,width:"900px"},on:{"update:visible":function(e){t.deliveryTableVisible=e}}},[s("v-Detail",{attrs:{"delivery-date":t.deliveryTime,"buy-seq":t.buySeq},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}})],1)],1)])},staticRenderFns:[]};var d=s("C7Lr")(c,v,!1,function(t){s("a3kH")},"data-v-e8810d64",null);e.default=d.exports},a3kH:function(t,e){}});