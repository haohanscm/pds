webpackJsonp([37],{fRrp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("U3y0"),r={data:function(){return{request:new l.a,pageSize:20,pageNo:1,total:0,layout:"total, sizes, prev, pager, next, jumper",buyerId:"",merchantName:"",date:[this.$utils.getDay(-7),this.$utils.getDay(0)],status:"",buyerList:[],editValue:{},dialogFormVisible:!1,list:[],batchCreateModel:{deliveryDate:"",buySeq:""}}},watch:{},computed:{dateFormat:function(){return function(e){return e&&(e=e.split(" ")[0]),e}}},created:function(){this.getPuramountList()},methods:{handlePageChange:function(e){this.pageSize=e.pageSize,this.pageNo=e.pageNo,this.getPuramountList()},getPuramountList:function(){var e=this;this.date||(this.date=["",""]);var t={beginBuyDate:this.date[0],endBuyDate:this.date[1],buyerId:this.buyerId,status:this.status,pageSize:this.pageSize,pageNo:this.pageNo};this.request.getPuramountList(t).then(function(t){200==t.code?(e.list=t.ext.list,e.total=t.ext.count):e.$message.warning("未查询到结算记录："+t.msg)})},batchCreate:function(){var e=this,t=this.batchCreateModel;t.deliveryDate&&t.buySeq?this.request.batchCreate(t).then(function(a){var l=a.msg;a.ext&&(console.log("ext",a.ext),l+="  "+a.ext.successMsg+";  "+a.ext.errorMsg),200==a.code?(e.dialogFormVisible=!1,e.$message.success({showClose:!0,message:"生成采购商货款成功："+l,type:"success",duration:0}),e.date=[t.deliveryDate,t.deliveryDate],e.getPuramountList()):e.$message({showClose:!0,message:"生成采购商货款失败："+l,type:"error",duration:0})}):this.$message.error("未选择时间/批次")}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("div",{staticClass:"title"},[a("el-form",{attrs:{inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"商家名称:"}},[a("el-input",{staticStyle:{"max-width":"150px"},attrs:{clearable:"",placeholder:"采购商所属商家"},model:{value:e.merchantName,callback:function(t){e.merchantName=t},expression:"merchantName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"送货时间段:"}},[a("el-date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"采购商:"}},[a("buyer-check",{model:{value:e.buyerId,callback:function(t){e.buyerId=t},expression:"buyerId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结算状态:"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.$dic.paymentStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getPuramountList}},[e._v("查询货款")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("批量生成采购商货款")])],1)],1)],1),e._v(" "),a("el-main",[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{type:"index",fixed:"",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"buyerPaymentId",label:"采购商货款编号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"buyerName",label:"采购商名称",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"merchantName",label:"商家"}}),e._v(" "),a("el-table-column",{attrs:{prop:"buyId",label:"采购编号"}}),e._v(" "),a("el-table-column",{attrs:{label:"送货日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                            "+e._s(e.dateFormat(t.row.buyDate))+"\n                        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsNum",label:"商品数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"buyerPayment",label:"采购货款"}}),e._v(" "),a("el-table-column",{attrs:{prop:"afterSalePayment",label:"售后货款"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"结算状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                            "+e._s(e.$dic.paymentStatus[t.row.status].label)+"\n                        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shipFee",label:"运费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceId",label:"售后单编号"}})],1)],1)]),e._v(" "),a("el-footer",[a("div",{staticClass:"page-box"},[a("div"),e._v(" "),a("my-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.pageNo,total:e.total,layout:e.layout,"page-sizes":[20,30,40,50]},on:{pagechange:e.handlePageChange}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"批量生成采购商货款",visible:e.dialogFormVisible,width:"70%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[e._v("\n                送货时间:\n            ")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.batchCreateModel.deliveryDate,callback:function(t){e.$set(e.batchCreateModel,"deliveryDate",t)},expression:"batchCreateModel.deliveryDate"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[e._v("\n                送货批次:\n            ")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.batchCreateModel.buySeq,callback:function(t){e.$set(e.batchCreateModel,"buySeq",t)},expression:"batchCreateModel.buySeq"}},e._l(e.$dic.buySeqOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.batchCreate}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("C7Lr")(r,s,!1,function(e){a("vrnt")},"data-v-4bb35942",null);t.default=o.exports},vrnt:function(e,t){}});