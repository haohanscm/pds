webpackJsonp([9],{"+Gjr":function(t,a){},"3zg4":function(t,a){},OxVn:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("G0Dk"),n=e("5YEj"),r=e.n(n),s={data:function(){return{option:{}}},props:{chartData:Array,activeName:String},watch:{chartData:{handler:function(){this.rangeAmount()},deep:!0,immediate:!0},activeName:{handler:function(){this.rangeAmount()},deep:!0}},mounted:function(){this.rangeAmount()},methods:{initChart:function(){this.chart=r.a.init(document.getElementById("map")),this.chart.clear(),this.chart.resize(),this.chart.setOption(this.option)},rangeAmount:function(){this.chartData[0]&&(this.option=this.computeMap(this.chartData),this.initChart())},computeMap:function(t){var a=[],e=[],i=[],n=0;return t[0].dateAmountList.forEach(function(t){e.push(t.date)}),t.forEach(function(t,e){a.push(t.merchantName),t.dateAmountList.forEach(function(t,a){i.push([e,a,t.payAmount||"-"]),t.payAmount>n&&(n=t.payAmount)})}),{tooltip:{position:"top"},animation:!1,grid:{height:"50%",y:"10%"},xAxis:{type:"category",data:a,splitArea:{show:!0}},yAxis:{type:"category",data:e,splitArea:{show:!0}},visualMap:{min:0,max:n,calculable:!0,orient:"horizontal",left:"center",bottom:"15%"},series:[{name:"应收账款",type:"heatmap",data:i,label:{normal:{show:!0}},itemStyle:{emphasis:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("div",{staticClass:"draw",attrs:{id:"map"}})])}]};var c=e("C7Lr")(s,o,!1,function(t){e("+Gjr")},"data-v-1569103a",null).exports,h=e("8uth"),l=e.n(h),u={data:function(){return{xAxis:{type:"category",data:[]},series:[{data:[],type:"line",smooth:!0}],period:"0",titleData:[],bodyData:[]}},props:{chartData:Array,activeName:String},watch:{chartData:{handler:function(){this.rangeAmount()},deep:!0},activeName:{handler:function(){this.rangeAmount()},deep:!0}},mounted:function(){this.rangeAmount()},methods:{rangeAmount:function(){this.chartData[0]&&this.computeMap(this.chartData)},computeMap:function(t){var a=[],e=[];a.push({label:"日期",prop:"0"});var i=t.length,n=[];t.forEach(function(t,r){a.push({label:t.merchantName,prop:(r+1).toString()});t.dateAmountList.length;t.dateAmountList.forEach(function(t,a){e[a]||(e[a]=[]),n[a]||(n[a]=0),0===r&&e[a].push(t.date),e[a].push(t.payAmount),n[a]=n[a]+t.payAmount,i-1===r&&e[a].push(n[a].toFixed(2))})}),a.push({label:"小计",prop:(t.length+1).toString()}),console.log(e,a),this.titleData=a,this.bodyData=e},exportExcel:function(){l.a.getExcel("ddd","","商家结算单.xls","bb")}}},d={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{id:"ddd",data:this.bodyData,"show-summary":"",border:""}},this._l(this.titleData,function(t,e){return a("el-table-column",{key:e,attrs:{width:0===e?100:"",prop:t.prop,label:t.label}})}),1),this._v(" "),a("a",{staticStyle:{float:"right","padding-bottom":"5px"},attrs:{id:"bb"},on:{click:this.exportExcel}},[a("el-button",{attrs:{type:"primary"}},[this._v("导出excel")])],1)],1)},staticRenderFns:[]};var m=e("C7Lr")(u,d,!1,function(t){e("XV1O")},"data-v-ea86f360",null).exports,p={data:function(){return{date:{startDate:this.$utils.getDay(-7),endDate:this.$utils.getDay(0)},option:{}}},props:{chartData:Array,activeName:String},watch:{chartData:{handler:function(){this.rangeAmount()},deep:!0},activeName:{handler:function(){this.rangeAmount()},deep:!0}},methods:{initChart:function(){this.chart=r.a.init(document.getElementById("billLine")),this.chart.clear(),this.chart.resize(),this.chart.setOption(this.option)},rangeAmount:function(){0!==this.chartData.length&&(this.option=this.computeLine(this.chartData),this.initChart())},computeLine:function(t){var a=[],e=[],i=[];return t.forEach(function(t,n){var r={name:t.merchantName,data:[],type:"line",smooth:!0};i.push(t.merchantName),t.dateAmountList.forEach(function(t){0===n&&e.push(t.date),r.data.push(t.payAmount)}),a.push(r)}),{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},legend:{data:i},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:a}}}},f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("div",{staticClass:"draw",attrs:{id:"billLine"}})])}]};var v=e("C7Lr")(p,f,!1,function(t){e("3zg4")},"data-v-25fd4c38",null).exports,y={data:function(){return{option:{}}},props:{chartData:Array,date:Array,activeName:String},watch:{chartData:{handler:function(){this.rangeAmount()},deep:!0,immediate:!0},activeName:{handler:function(){this.rangeAmount()},deep:!0}},methods:{initChart:function(){this.chart=r.a.init(document.getElementById("aaa")),this.chart.clear(),this.chart.resize(),this.chart.setOption(this.option)},rangeAmount:function(){0!==this.chartData.length&&(this.option=this.computeLine(this.chartData),this.initChart())},computeLine:function(t){var a=[{name:"商家应付金额",type:"bar",data:[]}],e=[];return t.forEach(function(t,i){a[0].data.push(t.totalPayAmount),e.push(t.merchantName)}),{title:{text:"商家结算图",subtext:this.date[0]+"至"+this.date[1]},color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},axis:{axisLabel:"0"},xAxis:{data:e},yAxis:[{type:"value"}],series:a}}}},g={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("div",{staticClass:"wrap",attrs:{id:"aaa"}})])}]};var b={data:function(){return{request:new i.a,date:[this.$utils.getDay(-7),this.$utils.getDay(0)],merchantId:"",chartData:[],activeName1:"first",activeName2:"second"}},created:function(){},watch:{date:{handler:function(){this.rangeAmount()},deep:!0,immediate:!0}},components:{vTheMap:c,vBillTable:m,vBillLine:v,vBillBar:e("C7Lr")(y,g,!1,function(t){e("kMY4")},"data-v-523f0f23",null).exports},methods:{rangeAmount:function(){var t=this;this.request.rangeAmount({startDate:this.date[0],endDate:this.date[1],merchantId:this.merchantId}).then(function(a){200===a.code?t.chartData=a.ext.list:t.$message.warning(a.msg)})}}},A={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"wrap"},[e("div",{staticClass:"check-condition"},[e("div",[e("el-date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1)]),t._v(" "),e("div",{staticClass:"chart"},[e("el-tabs",{attrs:{type:"card"},model:{value:t.activeName1,callback:function(a){t.activeName1=a},expression:"activeName1"}},[e("el-tab-pane",{attrs:{label:"热力图",name:"first"}},[e("v-the-map",{attrs:{activeName:t.activeName1,chartData:t.chartData}})],1),t._v(" "),e("el-tab-pane",{attrs:{label:"结算表格",name:"second"}},[e("v-bill-table",{attrs:{activeName:t.activeName1,chartData:t.chartData}})],1)],1)],1),t._v(" "),e("div",{staticClass:"chart"},[e("el-tabs",{attrs:{type:"card"},model:{value:t.activeName2,callback:function(a){t.activeName2=a},expression:"activeName2"}},[e("el-tab-pane",{attrs:{label:"商家销量柱状图",name:"second"}},[e("v-bill-bar",{attrs:{activeName:t.activeName2,chartData:t.chartData,date:t.date}})],1),t._v(" "),e("el-tab-pane",{attrs:{label:"折线/柱状图",name:"third"}},[e("v-bill-line",{attrs:{activeName:t.activeName2,chartData:t.chartData}})],1)],1)],1),t._v(" "),e("div",{staticStyle:{height:"150px"}})])},staticRenderFns:[]};var x=e("C7Lr")(b,A,!1,function(t){e("rOp5")},"data-v-0c84e144",null);a.default=x.exports},XV1O:function(t,a){},kMY4:function(t,a){},rOp5:function(t,a){}});