webpackJsonp([27],{"2KEf":function(t,e){},"9KOi":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("8uth"),i=s.n(a),l=s("5JDp"),r=s("a3Yh"),o=s.n(r),d={data:function(){return{request:new l.a,options:this.$dic.buySeqOptions,buyerOrderOption:this.$dic.buyerOrderOption,print:!1,pmName:this.$utils.getCookie("pmName")}},props:{value:Object},computed:{tableList:function(){var t=[],e=1;return this.value.orderDetailList.forEach(function(s){var a=s.goodsName,i=s.goodsModel,l=s.goodsUnit,r=s.goodsNum,d=s.buyPrice;if(s.tradeOrderList){var c=s.tradeOrderList.length;s.tradeOrderList.forEach(function(s,o){0==o?(t.push({height:c,myIndex:e,show:!0,goodsName:a,goodsModel:i,goodsUnit:l,goodsNum:r,buyPrice:d,offerId:s.offerId,supplyNum:s.supplyNum,tradeId:s.tradeId,opStatus:s.opStatus,offerPrice:s.buyPrice,supplierName:s.supplierName}),e++):t.push({height:c,index:o,show:!1,offerId:s.offerId,supplyNum:s.supplyNum,tradeId:s.tradeId,opStatus:s.opStatus,offerPrice:s.buyPrice,supplierName:s.supplierName})})}else{var n;t.push((n={height:1,myIndex:e,goodsName:a,goodsModel:i,goodsUnit:l},o()(n,"goodsUnit",l),o()(n,"goodsNum",r),o()(n,"buyPrice",d),o()(n,"show",!0),n)),e++}}),t},totalPrice:function(){var t=0;return this.value.orderDetailList.forEach(function(e){t+=e.goodsNum*e.buyPrice}),t.toFixed(2)},totalCharge:function(){return(+this.totalPrice+(this.value.shipFee||0)).toFixed(2)},totalNum:function(){var t=0;return this.value.orderDetailList.forEach(function(e){t+=e.goodsNum}),t.toFixed(0)}},methods:{exportExcel:function(){i.a.getExcel("ddd","","供应单.xls","bb")},checkSupplierList:function(){this.fetchBuyOrderList()},printTable:function(){this.print=!0;var t=document.getElementById("adasd").innerHTML;window.document.body.innerHTML=t,window.print()},changeShipFee:function(){this.editBuyOrder()},editBuyOrder:function(){var t=this;this.request.editBuyOrder({buyId:this.value.buyId,shipFee:this.value.shipFee}).then(function(e){200!=e.code&&t.$message.error(e.msg)})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{attrs:{id:"adasd"}},[s("table",{attrs:{border:"1",id:"ddd"}},[s("caption",[t._v(t._s(t.pmName)+"-采购单汇总")]),t._v(" "),s("tbody",[s("tr",[s("td",{attrs:{rowspan:"4"}}),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("采购单编号")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.buyId))])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow"},[t._v("采购商名称")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.buyerName))]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("采购日期")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.buyTime))])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow"},[t._v("送货时间")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.deliveryTime))]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("送货批次")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.options[t.value.buySeq].label))])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow"},[t._v("送货地址")]),t._v(" "),s("td",{attrs:{colspan:"4"}},[t._v(t._s(t.value.address))]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("联系人")]),t._v(" "),s("td",[t._v(t._s(t.value.contact))]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("联系电话")]),t._v(" "),s("td",[t._v(t._s(t.value.telephone))])]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._l(t.tableList,function(e,a){return s("tr",{key:a},[e.show?s("th",{staticClass:"bc-yellow",attrs:{rowspan:e.height}},[t._v(t._s(e.myIndex))]):t._e(),t._v(" "),e.show?s("td",{attrs:{rowspan:e.height}},[t._v(t._s(e.categroy))]):t._e(),t._v(" "),e.show?s("td",{staticStyle:{"max-width":"10%"},attrs:{rowspan:e.height}},[t._v(t._s(e.goodsName))]):t._e(),t._v(" "),e.show?s("td",{attrs:{rowspan:e.height}},[t._v(t._s(e.goodsModel))]):t._e(),t._v(" "),e.show?s("td",{attrs:{rowspan:e.height}},[t._v(t._s(e.goodsUnit))]):t._e(),t._v(" "),e.show?s("td",{attrs:{rowspan:e.height}},[t._v(t._s(e.goodsNum))]):t._e(),t._v(" "),e.show?s("td",{attrs:{rowspan:e.height}},[t._v(t._s(e.buyPrice))]):t._e(),t._v(" "),e.show?s("td",{attrs:{rowspan:e.height}},[t._v(t._s(e.buyPrice*e.goodsNum?(e.buyPrice*e.goodsNum).toFixed(2):"0.00")+"元")]):t._e(),t._v(" "),s("td",[t._v(t._s(e.offerId))]),t._v(" "),s("td",[t._v(t._s(e.supplierName))]),t._v(" "),s("td",[t._v(t._s(e.supplyNum))]),t._v(" "),s("td",[t._v(t._s(e.tradeId))]),t._v(" "),s("td",[t._v(t._s(t.buyerOrderOption[e.opStatus]))])])}),t._v(" "),t._m(2),t._v(" "),s("tr",[s("td",{attrs:{rowspan:"3"}}),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("总价")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[t._v(t._s(+t.totalPrice||"0")+"元")])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow"},[t._v("商品种类")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.orderDetailList.length))]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("物流运费")]),t._v(" "),s("td",{staticClass:"td-num",attrs:{colspan:"2"}},[t._v(t._s(t.value.shipFee||"0")+"元")])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow"},[t._v("采购数量")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.totalNum))]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("应收账款")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(+t.totalCharge||"0")+"元")])])],2)]),t._v(" "),t._m(3)]),t._v(" "),s("a",{attrs:{id:"bb"},on:{click:t.exportExcel}},[t._v("导出excel")]),t._v(" "),s("a",{attrs:{href:""},on:{click:t.printTable}},[t._v("打印")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"14"}},[this._v(" ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",{staticClass:"bc-yellow"},[t._v("序号")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("商品分类")]),t._v(" "),s("th",{staticClass:"bc-yellow",staticStyle:{"max-width":"10%"}},[t._v("商品名称")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("规格")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("单位")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("采购数量")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("采购单价")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("应付账款")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("报价单号")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("供应商名称")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("供应数量")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("交易单号")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("订单状态")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"14"}},[this._v(" ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("div",{staticClass:"footer-img"},[s("img",{attrs:{src:"http://haohanshop-file.oss-cn-beijing.aliyuncs.com/merchantFiles/df52d9b3b17643f6916c7d27279a268d/00/20181107/15415868614447adD.png",alt:""}}),t._v(" "),s("p",[t._v("关注公众号，自助下单")])]),t._v(" "),s("div",{staticClass:"right"},[s("div",[s("p",[t._v("♦ 请确保清单上物品信息与实际发出物品的信息相符合；")]),t._v(" "),s("p",[t._v("♦ 本人承诺所供应物品的质量完全合格，并愿意承担相应责任；")]),t._v(" "),s("p",[t._v("♦ 请在确认本货物供货单内容均为正确且属实后，进行签字，服务热线4000-562-180。")])]),t._v(" "),s("div",{staticClass:"footer-sign"},[s("div",[t._v("供应商签字：")]),t._v(" "),s("div",[t._v("日期：")])])])])}]};var n={data:function(){return{request:new l.a,buySeq:0,options:this.$dic.buySeqOptions,dialogTableVisible:!1,deliveryTableVisible:!1,deliveryTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),orderList:[],detail:{},deliveryTitle:{},deliveryList:[]}},components:{vDetail:s("C7Lr")(d,c,!1,function(t){s("LX+m")},"data-v-ed52eec6",null).exports},watch:{delivery:{handler:function(){},deep:!0}},created:function(){this.fetchBuyOrderList()},methods:{handleTableClick:function(t,e){this.fetchSumList(t.buyId)},exportExcel:function(){i.a.getExcel("ddd","","供应单.xls","bb")},checkSupplierList:function(){this.fetchBuyOrderList()},handleDeliveryClick:function(t,e){this.deliveryTitle=t,this.deliveryTableVisible=!0},fetchBuyOrderList:function(){var t=this;this.request.fetchBuyOrderList({deliveryDate:this.deliveryTime,buySeq:this.buySeq}).then(function(e){200==e.code?t.orderList=e.list:t.orderList=[]})},fetchSumList:function(t){var e=this;this.request.fetchSumList({buyOrderId:t}).then(function(t){200==t.code?(e.detail=t.ext,e.dialogTableVisible=!0):e.detail=[]})},editBuyDetail:function(t){var e=this;this.request.editBuyDetail({buyId:t}).then(function(t){200==t.code?(e.deliveryList=t.ext,e.deliveryTableVisible=!0):e.deliveryList=[]})}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"title"},[s("div",[s("div",{staticClass:"block"},[s("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","default-value":new Date,placeholder:"选择日期"},model:{value:t.deliveryTime,callback:function(e){t.deliveryTime=e},expression:"deliveryTime"}})],1)]),t._v(" "),s("div",[t._v("批次:"),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.buySeq,callback:function(e){t.buySeq=e},expression:"buySeq"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:t.checkSupplierList}},[t._v("查询")])],1)]),t._v(" "),s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,border:""}},[s("el-table-column",{attrs:{prop:"buyId",label:"采购单编号"}}),t._v(" "),s("el-table-column",{attrs:{prop:"buyerName",label:"采购商",width:"100px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"contact",label:"联系人",width:"100px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"telephone",label:"联系电话",width:"100px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"buyTime",label:"下单时间"}}),t._v(" "),s("el-table-column",{attrs:{prop:"deliveryTime",label:"配送时间"}}),t._v(" "),s("el-table-column",{attrs:{prop:"genPrice",label:"总价"}}),t._v(" "),s("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.handleTableClick(e.row,e.$index)}}},[t._v("采购单明细")])]}}])})],1),t._v(" "),s("el-dialog",{attrs:{title:"采购单",visible:t.dialogTableVisible,width:"1200px"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[s("v-detail",{model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}})],1)],1)])},staticRenderFns:[]};var u=s("C7Lr")(n,v,!1,function(t){s("2KEf")},"data-v-1adaafc8",null);e.default=u.exports},"LX+m":function(t,e){}});