webpackJsonp([43],{FPBK:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("RHYT"),s={data:function(){return{request:new a.a,columns:[{text:"分类名称",value:"name"},{text:"分类ID",value:"id"}],goodsCateLoading:!0,delTipsVisible:!1,data:[],selectionData:[]}},mounted:function(){this.fetchCategoryList()},methods:{fetchCategoryList:function(){var t=this;this.request.fetchCategoryList({}).then(function(e){var o=t.$utils.listToTree(e.ext);t.data=o,t.goodsCateLoading=!1})},addGoodsCate:function(t){this.$router.push({path:"/goods/addGoodsCate"})},addSubGoodsCate:function(t){this.$router.push({path:"/goods/addGoodsCate",query:{parentId:t.id,parentName:t.name}})},editGoodsCate:function(t){var e,o=t.parentId;e=this.getCategoryName(this.data,o),this.$router.push({path:"/goods/editGoodsCate",query:{categoryId:t.id,categoryName:t.name,parentId:t.parentId,parentName:e,sort:t.sort,logo:t.logo}})},delGoodsCate:function(t){var e=this,o=[];o.push(t.id),this.$confirm("确认删除？").then(function(t){e.request.deleteGoodsCategory({categoryIds:o}).then(function(t){200==t.code?(e.$message.success("删除分类成功"),e.fetchCategoryList()):e.$message.error("删除分类失败")})}).catch(function(t){})},delAllGoodsCate:function(){var t=this.$refs.categoryTable;console.log(t)},backToGoodsList:function(){console.log("object"),this.$router.push("/goods/goodsList")},onSelectionChange:function(t){this.$refs.categoryTable;console.log(t),this.selectionData=t},getCategoryName:function(t,e){var o=this,a="";return t.map(function(t){t.id==e?a=t.name:t.children&&t.children.length>0&&o.getCategoryName(t.children,e)}),a}}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"table"},[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",[o("i",{staticClass:"el-icon-hh-goods"}),t._v(" 商品管理")]),t._v(" "),o("el-breadcrumb-item",[o("i",{staticClass:"el-icon-hh-cascades"}),t._v(" 分类管理")])],1)],1),t._v(" "),o("div",{staticClass:"container"},[o("el-container",[o("el-header",[o("div",{staticClass:"goods-category-btns"},[o("div",[o("el-button",{attrs:{type:"primary"},on:{click:t.addGoodsCate}},[o("i",{staticClass:"el-icon-plus"}),t._v(" 新增分类")])],1),t._v(" "),o("div",[o("el-button",{attrs:{type:"default"},on:{click:t.backToGoodsList}},[o("i",{staticClass:"el-icon-hh-back_android"}),t._v(" 返回")])],1)])]),t._v(" "),o("el-main",{directives:[{name:"loading",rawName:"v-loading",value:t.goodsCateLoading,expression:"goodsCateLoading"}]},[o("tree-table",{ref:"categoryTable",attrs:{columns:t.columns,data:t.data,"expand-all":!0,selectionFn:t.onSelectionChange}},[o("el-table-column",{attrs:{label:"分类排序",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{staticClass:"category-sort",attrs:{"controls-position":"right",min:0},model:{value:e.row.sort,callback:function(o){t.$set(e.row,"sort",o)},expression:"scope.row.sort"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"分类图标",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.logo?o("img",{staticClass:"category-logo",attrs:{src:e.row.logo}}):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"新增子分类",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row._level?o("el-button",{attrs:{type:"primary"},on:{click:function(o){return t.addSubGoodsCate(e.row)}}},[t._v("新增")]):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){return t.editGoodsCate(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:function(o){return t.delGoodsCate(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)],1)])},staticRenderFns:[]};var r=o("C7Lr")(s,n,!1,function(t){o("HFX8")},"data-v-3c517dc4",null);e.default=r.exports},HFX8:function(t,e){}});