webpackJsonp([41],{"91AJ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("4YfN"),o=a.n(l),n=a("U3y0"),r={data:function(){return{request:new n.a,list:[]}},props:{form:{type:Object,default:{}}},methods:{onSubmit:function(){console.log("submit!")},changeCom:function(e){this.fetchCompanyList(e)},fetchCompanyList:function(e){var t=this;this.request.fetchCompanyList({companyType:e}).then(function(e){200==e.code?t.list=e.ext:t.$message.warning("未查询到结算记录："+e.msg)})},queryAmount:function(){var e=this;this.request.queryAmount(o()({},this.form,{beginDate:this.form.settlementBeginDate,endDate:this.form.settlementEndDate})).then(function(t){200==t.code?(e.form.paymentSn=t.ext.paymentSn,e.form.settlementAmount=t.ext.settlementAmount,console.log("aaa",e.form)):e.$message.warning(t.msg)})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"结算开始日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.settlementBeginDate,callback:function(t){e.$set(e.form,"settlementBeginDate",t)},expression:"form.settlementBeginDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结算结束日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.settlementEndDate,callback:function(t){e.$set(e.form,"settlementEndDate",t)},expression:"form.settlementEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.payDate,callback:function(t){e.$set(e.form,"payDate",t)},expression:"form.payDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家类型"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeCom},model:{value:e.form.companyType,callback:function(t){e.$set(e.form,"companyType",t)},expression:"form.companyType"}},e._l([{value:"1",label:"采购商"},{value:"2",label:"供应商"}],function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"结算类型"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.queryAmount},model:{value:e.form.settlementType,callback:function(t){e.$set(e.form,"settlementType",t)},expression:"form.settlementType"}},e._l([{value:"1",label:"收入"},{value:"2",label:"支出"}],function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"结算公司"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.queryAmount},model:{value:e.form.companyId,callback:function(t){e.$set(e.form,"companyId",t)},expression:"form.companyId"}},e._l(e.list,function(e){return a("el-option",{key:e.merchantName,attrs:{label:e.merchantName,value:e.merchantId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"结算金额"}},[a("el-input",{attrs:{value:e.form.settlementAmount},model:{value:e.form.settlementAmount,callback:function(t){e.$set(e.form,"settlementAmount",t)},expression:"form.settlementAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结算单号"}},[a("el-input",{attrs:{value:e.form.paymentSn},model:{value:e.form.paymentSn,callback:function(t){e.$set(e.form,"paymentSn",t)},expression:"form.paymentSn"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人"}},[a("el-input",{attrs:{value:e.form.operator},model:{value:e.form.operator,callback:function(t){e.$set(e.form,"operator",t)},expression:"form.operator"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结款人"}},[a("el-input",{attrs:{value:e.form.companyOperator},model:{value:e.form.companyOperator,callback:function(t){e.$set(e.form,"companyOperator",t)},expression:"form.companyOperator"}})],1)],1)],1)},staticRenderFns:[]},i={data:function(){return{pageSize:20,pageNo:1,total:0,request:new n.a,editValue:{},dialogFormVisible:!1,list:[]}},watch:{},components:{editTemp:a("C7Lr")(r,s,!1,null,null,null).exports},created:function(){this.getRecordList()},methods:{handlePageChange:function(e){this.pageSize=e.pageSize,this.pageNo=e.pageNo,this.getRecordList()},edit:function(e){this.editValue=e,this.dialogFormVisible=!0},confirm:function(){this.dialogFormVisible=!1,this.editRecord()},newList:function(){this.editValue={},this.dialogFormVisible=!0},getRecordList:function(){var e=this;this.request.getRecordList({pageSize:this.pageSize,pageNo:this.pageNo}).then(function(t){200==t.code?(e.list=t.ext.list,e.total=t.ext.count):e.$message.warning("未查询到结算记录："+t.msg)})},editRecord:function(){var e=this;this.request.editRecord(o()({},this.editValue)).then(function(t){200===t.code?e.$message.success("编辑成功！"):e.$message.warning("编辑失败："+t.msg),e.getCarList()})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"title"},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.newList}},[e._v("新增结算记录")])],1)]),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"settlementId",label:"货款编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"settlementBeginDate",label:"结算开始日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"settlementEndDate",label:"结算结束日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payDate",label:"付款日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"companyName",label:"结算公司名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"settlementDesc",label:"结算说明"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"经办人名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentSn",label:"对应货款单编号"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")])],1)]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page-box"},[a("div"),e._v(" "),a("my-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.pageNo,total:e.total,"page-sizes":[20,30,40,50]},on:{pagechange:e.handlePageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"结算记录编辑",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("edit-temp",{attrs:{form:e.editValue}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(i,m,!1,function(e){a("KiyK")},"data-v-49d790b6",null);t.default=c.exports},KiyK:function(e,t){}});