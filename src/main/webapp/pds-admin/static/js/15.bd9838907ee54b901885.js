webpackJsonp([15],{"4Yif":function(t,e){},"6H1B":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("5YEj"),i=a.n(s),o=a("G0Dk"),n={data:function(){return{request:new o.a,obj:{}}},props:{date:Array,buyerId:String,goodsId:String},watch:{date:{handler:function(){this.orderAnalyze()},deep:!0,immediate:!0},buyerId:{handler:function(){this.orderAnalyze()},deep:!0},goodsId:{handler:function(){this.orderAnalyze()},deep:!0}},mounted:function(){this.orderAnalyze()},methods:{orderAnalyze:function(){var t=this;this.request.orderAnalyze({startDate:this.date[0],endDate:this.date[1],buyerId:this.buyerId,goodsId:this.goodsId}).then(function(e){200===e.code?t.obj=e.ext:(t.obj={},t.$message.warning(e.msg))})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"item item-1"},[a("div",{staticClass:"item-title"},[t._v("销售额(税前&不含运费)/销售额(税后&含运费)")]),t._v(" "),a("div",{staticClass:"item-cont"},[t._v(t._s(t.obj.saleAmount)+" / "+t._s(t.obj.saleAmountWSF))])]),t._v(" "),a("div",{staticClass:"item item-2"},[a("div",{staticClass:"item-title"},[t._v("毛利润(税前&不含运费)/净利润(税后&含运费)")]),t._v(" "),a("div",{staticClass:"item-cont"},[t._v(t._s(t.obj.grossProfit)+" / "+t._s(t.obj.grossProfitWSF))])]),t._v(" "),a("div",{staticClass:"item item-3"},[a("div",{staticClass:"item-title"},[t._v("毛利率(税前&不含运费)/净利率(税后&含运费)")]),t._v(" "),a("div",{staticClass:"item-cont"},[t._v(t._s((100*t.obj.profitRate).toFixed(2))+" % / "+t._s((100*t.obj.profitRateWSF).toFixed(2))+"%")])])])},staticRenderFns:[]};var r=a("C7Lr")(n,d,!1,function(t){a("I8ex")},"data-v-008e9ce8",null).exports,l={data:function(){return{request:new o.a,xAxis:{type:"category",data:[]},series:[{data:[],type:"line",smooth:!0}],period:"0"}},props:{date:Array,buyerId:String,goodsId:String},watch:{date:{handler:function(){this.saleTrend()},deep:!0,immediate:!0},buyerId:{handler:function(){this.saleTrend()},deep:!0},goodsId:{handler:function(){this.saleTrend()},deep:!0}},mounted:function(){this.saleTrend()},methods:{initChart:function(){this.chart=i.a.init(document.getElementById("asa")),this.chart.clear(),this.chart.resize(),this.chart.setOption({title:{text:"销售趋势",subtext:this.date[0]+"至"+this.date[1]},tooltip:{trigger:"axis"},legend:{data:["下单金额","销售金额","实际成本","毛利润","毛利率"]},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.xAxisData},yAxis:{type:"value",axisLabel:{formatter:"{value}"}},series:this.series})},saleTrend:function(){var t=this;this.request.saleTrend({startDate:this.date[0],endDate:this.date[1],buyerId:this.buyerId,goodsId:this.goodsId}).then(function(e){if(200===e.code){var a=t.computeLine(e.ext);t.series=a.series,t.xAxisData=a.xAxisData}else t.series=[],t.xAxisData=[],t.$message.warning(e.msg);t.initChart()})},computeLine:function(t){var e={name:"下单金额",type:"line",data:[]},a={name:"销售金额",type:"line",data:[]},s={name:"实际成本",type:"line",data:[]},i={name:"毛利润",type:"line",data:[]},o={name:"毛利率",type:"line",data:[]},n=[];return t.forEach(function(t){e.data.push(t.orderAmount),a.data.push(t.saleAmount),s.data.push(t.cost),i.data.push(t.grossProfit),o.data.push(t.grossProfitRate),n.push(t.buyDate)}),{series:[e,a,s,i,o],xAxisData:n}}}},c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"draw",attrs:{id:"asa"}})])}]};var u=a("C7Lr")(l,c,!1,function(t){a("DBb5")},"data-v-1c5a2a35",null).exports,h={data:function(){return{request:new o.a,xAxis:{type:"category",data:[]},series:[{data:[],type:"line",smooth:!0}],period:"0",option:{title:{text:"商户销量排行",subtext:this.date[0]+"至"+this.date[1]},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["订单数","销售额"]},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["bar","bar"]},restore:{},saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:[]},series:[{name:"销售额",type:"bar",data:[]},{name:"订单数",type:"line",data:[]}]}}},mounted:function(){this.buyerSaleTop()},props:{date:Array,buyerId:String,goodsId:String},watch:{date:{handler:function(){this.buyerSaleTop()},deep:!0,immediate:!0},buyerId:{handler:function(){this.buyerSaleTop()},deep:!0},goodsId:{handler:function(){this.buyerSaleTop()},deep:!0}},methods:{initChart:function(){this.chart=i.a.init(document.getElementById("merchant-sale")),this.chart.clear(),this.chart.resize(),this.chart.setOption(this.option)},buyerSaleTop:function(){var t=this;this.request.buyerSaleTop({startDate:this.date[0],endDate:this.date[1],buyerId:this.buyerId,goodsId:this.goodsId}).then(function(e){200===e.code?t.computeOpt(e.ext):(t.computeOpt([{amount:0,orderNum:0,buyerName:""}]),t.$message.warning(e.msg)),t.initChart()})},computeOpt:function(t){var e=[],a=[],s=[];t.sort(function(t,e){return e.amount-t.amount}),t.forEach(function(t){e.unshift(t.amount),a.unshift(t.orderNum),s.unshift(t.buyerName)}),console.log(e,a),this.option.series[0].data=e,this.option.series[1].data=a,this.option.yAxis.data=s,this.option.title.subtext=this.date[0]+"至"+this.date[1]}}},m={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"draw",attrs:{id:"merchant-sale"}})])}]};var p={data:function(){return{request:new o.a,date:[this.$utils.getDay(-7),this.$utils.getDay(0)],buyerId:"",buyerList:[],goodsList:[],goodsName:"",spuIndex:"",goodsModelList:[],goodsId:""}},components:{vTotalTitle:r,vSaleTrend:u,vMerchantSale:a("C7Lr")(h,m,!1,function(t){a("jcDH")},"data-v-0ca7d1c0",null).exports},mounted:function(){},watch:{buyerId:{handler:function(){console.log(2323)}}},methods:{getDate:function(){console.log(this.date)},getGoodsList:function(t){var e=this;t.pageSize=50,this.request.getGoodsList(t).then(function(t){200==t.code?(e.goodsList=t.ext.list,console.log(e.goodsList)):console.log("商品列表获取错误",t.msg)})},searchGoodsByName:function(t){if(""!==t){var e={goodsName:t};this.getGoodsList(e)}},onGoodsSelectChange:function(){this.goodsModelList=this.goodsList[this.spuIndex].goodsModelList,this.goodsId=this.goodsModelList[0].id}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"check-condition"},[a("div",[a("el-date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),a("div",[t._v("采购商:\n            "),a("buyer-check",{model:{value:t.buyerId,callback:function(e){t.buyerId=e},expression:"buyerId"}})],1),t._v(" "),a("div",[a("el-select",{staticClass:"form-field--large",attrs:{filterable:"",clearable:"",remote:"","remote-method":t.searchGoodsByName,placeholder:"请输入商品名称"},on:{change:t.onGoodsSelectChange},model:{value:t.spuIndex,callback:function(e){t.spuIndex=e},expression:"spuIndex"}},t._l(t.goodsList,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.goodsName,value:e}})}),1)],1),t._v(" "),a("div",[a("el-select",{staticClass:"form-field--large",attrs:{clearable:"",placeholder:"请选择商品规格"},model:{value:t.goodsId,callback:function(e){t.goodsId=e},expression:"goodsId"}},t._l(t.goodsModelList,function(t){return a("el-option",{key:t.id,attrs:{label:t.modelName,value:t.id}})}),1)],1)]),t._v(" "),a("div",{staticClass:"title"},[a("v-total-title",{attrs:{date:t.date,buyerId:t.buyerId}})],1),t._v(" "),a("div",{staticClass:"charts"},[a("div",{staticClass:"charts-left"},[a("v-sale-trend",{attrs:{date:t.date,buyerId:t.buyerId,goodsId:t.goodsId}})],1),t._v(" "),a("div",{staticClass:"charts-right"},[a("v-merchant-sale",{attrs:{date:t.date,goodsId:t.goodsId}})],1)]),t._v(" "),a("div")])},staticRenderFns:[]};var g=a("C7Lr")(p,f,!1,function(t){a("4Yif")},"data-v-75c4ae1c",null);e.default=g.exports},DBb5:function(t,e){},I8ex:function(t,e){},jcDH:function(t,e){}});