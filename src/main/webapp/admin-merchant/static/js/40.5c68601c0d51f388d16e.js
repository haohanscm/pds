webpackJsonp([40],{"2+M9":function(e,t){},LYhP:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("cWdR"),s=i("4SIL"),o={name:"basetable",components:{vClassification:n.a},data:function(){return{dialogVisible:!1,ctrl:{data:[{name:"1",params:{id:1223}}],request:"fun"},deliveryManInfo:{id:"",realName:"",mobile:"",shopId:""},communityList:{},shopList:[],request:new s.a,checkedList:[]}},created:function(){this.getData(),this.getShopList()},mounted:function(){},computed:{deliveryCommunityModel:function(){return{id:this.deliveryManInfo.id,shopId:this.deliveryManInfo.shopId}},deliveryManInfoModel:function(){return{id:this.deliveryManInfo.id,realName:this.deliveryManInfo.realName,mobile:this.deliveryManInfo.mobile,shopId:this.deliveryManInfo.shopId}},editServiceAreaModel:function(){var e=[],t=[];return this.checkedList.forEach(function(i){"del"==i.type?t.push(i.id):"add"==i.type&&e.push(i.id)}),{shopId:this.deliveryManInfo.shopId,deliveryManId:this.deliveryManInfo.id,addItems:e,deleteItems:t}},addDeliveryManModel:function(){return{realName:this.deliveryManInfo.realName,mobile:this.deliveryManInfo.mobile,shopId:this.deliveryManInfo.shopId}},checkCommunity:function(){}},watch:{},methods:{getData:function(){if(this.isEdit=this.$route.query.isEdit,this.isEdit){var e=this.$route.query.deliveryManInfo;this.isEdit=this.$route.query.isEdit,this.deliveryManInfo=e}},getShopList:function(){var e=this;this.fetchShopList().then(function(t){200==t.code&&(e.shopList=t.ext)})},setCommunityList:function(){var e=this;this.fetchManCommunityList().then(function(t){200==t.code?e.communityList=t.ext:e.communityList=[]})},checkItems:function(e){var t=this.$utils.findItem(this.checkedList,e,"id");t<0?(1==e.selected?e.type="add":e.type="del",this.checkedList.push(e)):this.checkedList.splice(t,1),console.log(this.checkedList)},editDeliveryManInfo:function(){var e=this;console.log(this.editServiceAreaModel),this.editDeliveryMan().then(function(t){if(200==t.code)return e.editServiceArea()}).then(function(t){200==t.code&&e.$utils.showSuccess(e,"修改成功"),e.$router.go(-1)}).catch(function(t){e.$utils.showErr(e,t)}).finally(function(t){e.checkedList=[]})},addDeliveryManInfo:function(){var e=this;this.addDeliveryMan().then(function(t){if(200==t.code)return e.deliveryManInfo.id=t.ext,e.editServiceArea()}).then(function(t){200==t.code&&e.$utils.showSuccess(e,"修改成功"),e.$router.go(-1)})},fetchShopList:function(){return this.request.fetchShopList()},fetchManCommunityList:function(){return this.request.fetchManCommunityList(this.deliveryCommunityModel)},editServiceArea:function(){return this.request.editServiceArea(this.editServiceAreaModel)},editDeliveryMan:function(){return this.request.editDeliveryMan(this.deliveryManInfoModel)},addDeliveryMan:function(){return this.request.addDeliveryMan(this.addDeliveryManModel)}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-tickets"}),e._v(" 配送员编辑")])],1)],1),e._v(" "),i("div",{staticClass:"container marginTop"},[i("div",{staticClass:"item"},[e._v("\n            配送员姓名："),i("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入内容"},model:{value:e.deliveryManInfo.realName,callback:function(t){e.$set(e.deliveryManInfo,"realName",t)},expression:"deliveryManInfo.realName"}})],1),e._v(" "),i("div",{staticClass:"item"},[e._v("\n            配送员电话："),i("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入内容"},model:{value:e.deliveryManInfo.mobile,callback:function(t){e.$set(e.deliveryManInfo,"mobile",t)},expression:"deliveryManInfo.mobile"}})],1),e._v(" "),i("div",{staticClass:"item"},[e._v("\n            所属的店铺："),i("el-select",{staticStyle:{flex:"1"},model:{value:e.deliveryManInfo.shopId,callback:function(t){e.$set(e.deliveryManInfo,"shopId",t)},expression:"deliveryManInfo.shopId"}},e._l(e.shopList,function(e){return i("el-option",{key:e.id,attrs:{label:e.shopName,value:e.id}})}),1)],1),e._v(" "),i("div",{staticClass:"item"},[i("el-collapse",{staticStyle:{width:"100%"},on:{change:e.setCommunityList}},[i("el-collapse-item",{attrs:{title:"配送的小区：",name:"1"}},e._l(e.communityList,function(t){return i("div",{key:t.id,staticClass:"community-item"},[i("el-checkbox",{attrs:{label:t.name,border:""},on:{change:function(i){return e.checkItems(t)}},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"item.selected"}})],1)}),0)],1),e._v(" "),i("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("v-classification",{attrs:{ctrl:e.ctrl},on:{checked:e.checkCommunity}}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)],1),e._v(" "),i("div",{staticClass:"item"},[e.isEdit?i("el-button",{attrs:{type:"primary",plain:"",size:"medium"},on:{click:e.editDeliveryManInfo}},[e._v("修改配送员")]):e._e(),e._v(" "),e.isEdit?e._e():i("el-button",{attrs:{type:"primary",plain:"",size:"medium"},on:{click:e.addDeliveryManInfo}},[e._v("新增配送员")])],1)])])},staticRenderFns:[]};var l=i("C7Lr")(o,a,!1,function(e){i("2+M9")},"data-v-519770f9",null);t.default=l.exports}});