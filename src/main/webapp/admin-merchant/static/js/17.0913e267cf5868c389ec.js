webpackJsonp([17],{"97DI":function(t,e){},DPf9:function(t,e){},a8a3:function(t,e){},mTpG:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("4YfN"),i=s.n(a),r=s("8uth"),l=s.n(r),n=s("5JDp");var c,o={deliveryConstruct:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={buyId:"",buyPrice:"",buyerId:"",goodsId:"",goodsImg:"",goodsModel:"",goodsName:"",goodsNum:"",id:"",marketPrice:"",remarks:"",status:"",unit:"",updateDate:""},s=arguments[1]-t.length,a=0;a<s;a++)t.push(e);return t}},d=s("a3Yh"),v=s.n(d),_={data:function(){return{options:this.$dic.buySeqOptions,pmName:this.$utils.getCookie("pmName"),tabStatus:"first",shipfee:0,pageSize:20,pageNo:1,total:0,totalPage:0,totalKinds:0,list:[]}},props:(c={value:Object,deliveryDate:String,buySeq:Number,trucks:Array,truckIndex:Number,conciseList:Array,truckNo:String},v()(c,"deliveryDate",String),v()(c,"remarks",String),c),watch:{value:{handler:function(t,e){t.shipFee||(t.shipFee=0)},deep:!0,immediate:!0}},computed:{totalPrice:function(){var t=0;return this.conciseList.forEach(function(e){t+=+e.charge||0}),t.toFixed(2)},totalCharge:function(){return(+this.totalPrice+ +this.shipfee).toFixed(2)},totalNum:function(){var t=0;return this.conciseList.forEach(function(e){e.shipNum&&(t+=+e.shipNum)}),t}},methods:{exportExcel:function(){l.a.getExcel("ddd","","送货单.xls","bb")},checkSupplierList:function(){this.fetchBuyOrderList()},changeNo:function(t){this.pageNo=t,this.shipOrder()},changeShipfee:function(t){this.editBuyOrder()},changeRemarks:function(){this.$emit("refreshRemarks",this.remarks)},printTable:function(t){var e=document.getElementById(t).innerHTML;window.document.body.innerHTML=e,window.print(),location.reload()}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.list?s("div",{attrs:{id:"concise"}},[s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("table",{attrs:{border:"1",id:"ddd"}},[s("caption",{staticStyle:{"background-color":"white"}},[t._v(t._s(t.pmName)+"-送货单")]),t._v(" "),s("tbody",[s("tr",[s("td",{staticClass:"blod",attrs:{colspan:"2"}},[t._v("采购商名称")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.buyerName))]),t._v(" "),s("td",{staticClass:"blod"},[t._v("车辆")]),t._v(" "),s("td",{staticClass:"print-hidden",attrs:{colspan:"2"}},[s("el-select",{attrs:{placeholder:"请选择车辆"},model:{value:t.truckIndex,callback:function(e){t.truckIndex=e},expression:"truckIndex"}},t._l(t.trucks,function(t,e){return s("el-option",{key:t.id,attrs:{label:t.truckName+t.truckNo,value:e}})}),1)],1),t._v(" "),s("td",{staticClass:"print-show",attrs:{colspan:"2"}},[t._v(t._s(t.trucks[t.truckIndex].truckName)+" "+t._s(t.trucks[t.truckIndex].truckNo))]),t._v(" "),s("td",{staticClass:"blod"},[t._v("司机")]),t._v(" "),s("td",[t._v(t._s(t.trucks[t.truckIndex].principal))])]),t._v(" "),s("tr",[s("td",{staticClass:"blod",attrs:{colspan:"2"}},[t._v("送货时间")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.deliveryDate))]),t._v(" "),s("td",{staticClass:"blod"},[t._v("送货批次")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.options[t.buySeq].label))]),t._v(" "),s("td",{staticClass:"blod"},[t._v("司机电话")]),t._v(" "),s("td",[t._v(t._s(t.trucks[t.truckIndex].telephone))])]),t._v(" "),t._m(0),t._v(" "),s("tr",[s("td",{attrs:{colspan:"5"}},[t._v(t._s(t.value.address))]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.contact))]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.telephone))])]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._l(t.conciseList,function(e,a){return s("tr",{key:a},[s("td",{staticClass:"blod"},[t._v(t._s(a+1))]),t._v(" "),s("td",[t._v(t._s(e.buyId))]),t._v(" "),s("td",[t._v(t._s(e.goodsCategory))]),t._v(" "),s("td",[t._v(t._s(e.goodsName))]),t._v(" "),s("td",[t._v(t._s(e.goodsModel))]),t._v(" "),s("td",[t._v(t._s(e.goodsUnit))]),t._v(" "),s("td",[t._v(t._s(e.shipNum))]),t._v(" "),s("td",[t._v(t._s(e.buyPrice))]),t._v(" "),s("td",[t._v(t._s(+e.charge||""))])])}),t._v(" "),s("tr",[s("td",{attrs:{colspan:"2"}},[t._v("备注")]),t._v(" "),s("td",{staticClass:"print-hidden to-left",attrs:{colspan:"7"}},[s("el-input",{on:{change:t.changeRemarks},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1),t._v(" "),s("td",{staticClass:"print-show to-left",attrs:{colspan:"7"}},[t._v(t._s(t.remarks))])]),t._v(" "),s("tr",[s("td",{staticClass:"blod",attrs:{colspan:"2",rowspan:"2"}},[t._v("合计")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("商品种类")]),t._v(" "),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.conciseList.length))]),t._v(" "),s("td",{staticClass:"blod",attrs:{colspan:"2"}},[t._v("运费（元）")]),t._v(" "),s("td",{staticClass:"print-hidden",attrs:{colspan:"1"}},[s("el-input",{on:{change:t.changeShipfee},model:{value:t.shipfee,callback:function(e){t.shipfee=e},expression:"shipfee"}})],1),t._v(" "),s("td",{staticClass:"print-show",attrs:{colspan:"1"}},[t._v(t._s(t.value.shipFee))]),t._v(" "),s("td",{staticClass:"blod",attrs:{colspan:"1"}},[t._v("本页小计（元）")]),t._v(" "),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.totalPrice))])]),t._v(" "),s("tr",[s("td",{staticClass:"blod"},[t._v("采购数量")]),t._v(" "),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.totalNum))]),t._v(" "),s("td",{staticClass:"blod",attrs:{colspan:"2"}},[t._v("应收总账款（元）")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.totalCharge))])])],2)]),t._v(" "),s("div",{staticClass:"padRight-cons"},[t._v("第一联（记账联）第二联（库房）第三联（采购商）")])]),t._v(" "),t._m(3)]):t._e(),t._v(" "),s("a",{attrs:{id:"bb"},on:{click:t.exportExcel}},[t._v("导出excel")]),t._v(" "),s("a",{on:{click:function(e){return t.printTable("concise")}}},[t._v("打印")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"blod",attrs:{colspan:"5"}},[this._v("送货地址")]),this._v(" "),e("td",{staticClass:"blod",attrs:{colspan:"2"}},[this._v("送货联系人")]),this._v(" "),e("td",{staticClass:"blod",attrs:{colspan:"2"}},[this._v("联系电话")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"9"}},[this._v(" ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"blod"},[t._v("序号")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("采购单号")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("商品分类")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("商品名称")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("规格")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("单位")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("供应数量")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("单价（元）")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("应收款项（元）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("div",{staticClass:"right"},[e("div",{staticClass:"footer-sign"},[e("div",[this._v("签收人：")]),this._v(" "),e("div",[this._v("日期：")])])])])}]};var h,p=s("C7Lr")(_,u,!1,function(t){s("uUNL")},"data-v-987ea07c",null).exports,b={data:function(){return{options:this.$dic.buySeqOptions,pmName:this.$utils.getCookie("pmName"),tabStatus:"first",shipfee:0,pageSize:20,pageNo:1,total:0,totalPage:0,totalKinds:0,list:[]}},props:(h={value:Object,deliveryDate:String,buySeq:Number,trucks:Array,truckIndex:Number,conciseList:Array,truckNo:String},v()(h,"deliveryDate",String),v()(h,"remarks",String),h),watch:{value:{handler:function(t,e){t.shipFee||(t.shipFee=0)},deep:!0,immediate:!0}},computed:{totalPrice:function(){var t=0;return this.conciseList.forEach(function(e){t+=+e.charge||0}),t.toFixed(2)},totalCharge:function(){return(+this.totalPrice+ +this.shipfee).toFixed(2)},totalNum:function(){var t=0;return this.conciseList.forEach(function(e){e.shipNum&&(t+=+e.shipNum)}),t}},methods:{exportExcel:function(){l.a.getExcel("ddd","","送货单.xls","bb")},checkSupplierList:function(){this.fetchBuyOrderList()},changeNo:function(t){this.pageNo=t,this.shipOrder()},changeShipfee:function(t){this.editBuyOrder()},changeRemarks:function(){this.$emit("refreshRemarks",this.remarks)},printTable:function(t){var e=document.getElementById(t).innerHTML;window.document.body.innerHTML=e,window.print(),location.reload()}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.list?s("div",{attrs:{id:"concise"}},[s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("table",{attrs:{border:"1",id:"ddd"}},[s("caption",{staticStyle:{"background-color":"white"}},[t._v(t._s(t.pmName)+"-送货单")]),t._v(" "),s("tbody",[t._m(0),t._v(" "),s("tr",[s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.value.buyerName))]),t._v(" "),s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.value.address))]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.deliveryDate))])]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._l(t.conciseList,function(e,a){return s("tr",{key:a},[s("td",{staticClass:"blod"},[t._v(t._s(a+1))]),t._v(" "),s("td",[t._v(t._s(e.buyId))]),t._v(" "),s("td",[t._v(t._s(e.goodsName))]),t._v(" "),s("td",[t._v(t._s(e.goodsModel))]),t._v(" "),s("td",[t._v(t._s(e.goodsUnit))]),t._v(" "),s("td",[t._v(t._s(e.shipNum))]),t._v(" "),s("td",[t._v(t._s(e.buyPrice))]),t._v(" "),s("td",[t._v(t._s(+e.charge||""))])])}),t._v(" "),s("tr",[s("td",{attrs:{colspan:"2"}},[t._v("备注")]),t._v(" "),s("td",{staticClass:"print-hidden to-left",attrs:{colspan:"6"}},[s("el-input",{on:{change:t.changeRemarks},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1),t._v(" "),s("td",{staticClass:"print-show to-left",attrs:{colspan:"6"}},[t._v(t._s(t.remarks))])]),t._v(" "),s("tr",[s("td",{staticClass:"blod",attrs:{colspan:"1",rowspan:"2"}},[t._v("合计")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("商品种类")]),t._v(" "),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.conciseList.length))]),t._v(" "),s("td",{staticClass:"blod",attrs:{colspan:"2"}},[t._v("运费（元）")]),t._v(" "),s("td",{staticClass:"print-hidden",attrs:{colspan:"1"}},[s("el-input",{on:{change:t.changeShipfee},model:{value:t.shipfee,callback:function(e){t.shipfee=e},expression:"shipfee"}})],1),t._v(" "),s("td",{staticClass:"print-show",attrs:{colspan:"1"}},[t._v(t._s(t.value.shipFee))]),t._v(" "),s("td",{staticClass:"blod",attrs:{colspan:"1"}},[t._v("本页小计（元）")]),t._v(" "),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.totalPrice))])]),t._v(" "),s("tr",[s("td",{staticClass:"blod"},[t._v("采购数量")]),t._v(" "),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.totalNum.toFixed(2)))]),t._v(" "),s("td",{staticClass:"blod",attrs:{colspan:"2"}},[t._v("应收总账款（元）")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.totalCharge))])])],2)]),t._v(" "),s("div",{staticClass:"padRight-cons"},[t._v("第一联（记账联）第二联（库房）第三联（采购商）")])]),t._v(" "),t._m(3)]):t._e(),t._v(" "),s("a",{attrs:{id:"bb"},on:{click:t.exportExcel}},[t._v("导出excel")]),t._v(" "),s("a",{on:{click:function(e){return t.printTable("concise")}}},[t._v("打印")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"blod",attrs:{colspan:"3"}},[this._v("送货单位")]),this._v(" "),e("td",{staticClass:"blod",attrs:{colspan:"3"}},[this._v("送货地址")]),this._v(" "),e("td",{staticClass:"blod",attrs:{colspan:"2"}},[this._v("日期")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"8"}},[this._v(" ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"blod"},[t._v("序号")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("采购单号")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("商品名称")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("规格")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("单位")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("供应数量")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("单价（元）")]),t._v(" "),s("td",{staticClass:"blod"},[t._v("应收款项（元）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("div",{staticClass:"right"},[e("div",{staticClass:"footer-sign"},[e("div",[this._v("签收人：")]),this._v(" "),e("div",[this._v("日期：")])])])])}]};var m={data:function(){return{request:new n.a,options:this.$dic.buySeqOptions,conciseList:[],pmName:this.$utils.getCookie("pmName"),tabStatus:"second",shipfee:0,pageSize:1e3,pageNo:1,total:0,totalPage:0,totalKinds:0,list:[],remarks:"",trucks:[{id:"",remarks:"",truckNo:"",brand:"",truckName:"",principal:"",driver:"",telephone:"",carryWeight:"",carryVolume:"",status:""}],truckIndex:0}},components:{vConcise:p,vMinimalist:s("C7Lr")(b,f,!1,function(t){s("DPf9")},"data-v-5025d837",null).exports},props:{value:Object,buySeq:Number,truckNo:String,deliveryDate:String},watch:{value:{handler:function(t,e){console.log(t),t.shipFee||(t.shipFee=0),this.shipOrder(t.buyerId),this.truckList()},deep:!0,immediate:!0}},computed:{tableList:function(){var t=[];return this.list.forEach(function(e){e.buyPrice||e.goodsNum?e.charge=(e.shipNum*e.buyPrice).toFixed(2):e.charge="",t.push(e)}),t},totalPrice:function(){var t=0;return this.tableList.forEach(function(e){t+=+e.charge||0}),t.toFixed(2)},totalCharge:function(){return(+this.totalPrice+ +this.shipfee).toFixed(2)},totalNum:function(){var t=0;return this.tableList.forEach(function(e){e.shipNum&&(t+=+e.shipNum)}),t}},methods:{exportExcel:function(){l.a.getExcel("ddd","","送货单.xls","bb")},checkSupplierList:function(){this.fetchBuyOrderList()},refreshRemarks:function(t){this.remarks=t,this.editRemark()},changeNo:function(t){this.pageNo=t,this.shipOrder()},changeShipfee:function(t){this.editBuyOrder()},printTable:function(t){var e=document.getElementById(t).innerHTML;window.document.body.innerHTML=e,window.print(),location.reload()},shipOrder:function(t){var e=this;this.request.shipOrder({buyerId:t||this.value.buyerId,deliveryDate:this.deliveryDate,buySeq:this.buySeq,truckNo:this.truckNo,pageSize:this.pageSize,pageNo:this.pageNo}).then(function(t){if(200==t.code){e.totalKinds=t.list.length;var s=[];t.list.forEach(function(t){s.push(t)}),e.conciseList=s,"first"===e.tabStatus?e.list=o.deliveryConstruct(t.list,20):e.list=t.list,e.total=t.totalRows,e.totalPage=t.totalPage}})},handleClick:function(t){console.log(this.tabStatus),"first"===this.tabStatus?this.pageSize=20:"second"===this.tabStatus?this.pageSize=1e3:"third"===this.tabStatus&&(this.pageSize=1e3),this.shipOrder()},editRemark:function(){var t=this;this.request.editRemark({remarks:this.remarks,shipId:this.value.shipId}).then(function(e){200===e.code?t.$message.success(e.msg):t.$message.warning(e.msg)})},editBuyOrder:function(){var t=this;this.request.editBuyOrder({buyId:this.tableList[0].buyId,shipFee:this.shipfee}).then(function(e){200==e.code?t.value.shipFee=t.shipfee:t.shipfee=0})},truckList:function(){var t=this;this.request.truckList().then(function(e){200==e.code&&(t.trucks=e.ext)})}}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.tabStatus,callback:function(e){t.tabStatus=e},expression:"tabStatus"}},[s("el-tab-pane",{attrs:{label:"标准版",name:"first"}},[t.list?s("div",{attrs:{id:"adasd"}},[s("div",{staticStyle:{"text-align":"center","font-size":"14px",color:"#bbb","padding-bottom":"10px"}},[t._v(t._s(t.pmName))]),t._v(" "),s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("table",{attrs:{border:"1",id:"ddd"}},[s("caption",[t._v("送货单")]),t._v(" "),s("tbody",[s("tr",[s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("采购商名称")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.buyerName))]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("车辆")]),t._v(" "),s("td",{staticClass:"print-hidden",attrs:{colspan:"2"}},[s("el-select",{attrs:{placeholder:"请选择车辆"},model:{value:t.truckIndex,callback:function(e){t.truckIndex=e},expression:"truckIndex"}},t._l(t.trucks,function(t,e){return s("el-option",{key:t.id,attrs:{label:t.truckName+t.truckNo,value:e}})}),1)],1),t._v(" "),s("td",{staticClass:"print-show",attrs:{colspan:"2"}},[t._v(t._s(t.trucks[t.truckIndex].truckName)+" "+t._s(t.trucks[t.truckIndex].truckNo))]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("司机")]),t._v(" "),s("td",[t._v(t._s(t.trucks[t.truckIndex].principal))])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("送货时间")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.deliveryDate))]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("送货批次")]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.options[t.buySeq].label))]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("司机电话")]),t._v(" "),s("td",[t._v(t._s(t.trucks[t.truckIndex].telephone))])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow",attrs:{colspan:"5"}},[t._v("送货地址")]),t._v(" "),s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("送货联系人")]),t._v(" "),s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("联系电话")])]),t._v(" "),s("tr",[s("td",{attrs:{colspan:"5"}},[t._v(t._s(t.value.address))]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.contact))]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.value.telephone))])]),t._v(" "),s("tr",[s("td",{attrs:{colspan:"9"}},[t._v(" ")])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow"},[t._v("序号")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("采购单号")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("商品分类")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("商品名称")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("规格")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("单位")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("供应数量")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("单价（元）")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("应收款项（元）")])]),t._v(" "),t._l(t.tableList,function(e,a){return s("tr",{key:a},[s("th",{staticClass:"bc-yellow"},[t._v(t._s(a+1))]),t._v(" "),s("td",[t._v(t._s(e.buyId))]),t._v(" "),s("td",[t._v(t._s(e.goodsCategory))]),t._v(" "),s("td",[t._v(t._s(e.goodsName))]),t._v(" "),s("td",[t._v(t._s(e.goodsModel))]),t._v(" "),s("td",[t._v(t._s(e.goodsUnit))]),t._v(" "),s("td",[t._v(t._s(e.shipNum))]),t._v(" "),s("td",[t._v(t._s(e.buyPrice))]),t._v(" "),s("td",[t._v(t._s(+e.charge||""))])])}),t._v(" "),s("tr",[s("td",{attrs:{colspan:"2"}},[t._v("备注")]),t._v(" "),s("td",{staticClass:"print-hidden to-left",attrs:{colspan:"7"}},[s("el-input",{on:{change:t.changeShipfee},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1),t._v(" "),s("td",{staticClass:"print-show to-left",attrs:{colspan:"7"}},[t._v(t._s(t.remarks))])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow",attrs:{colspan:"2",rowspan:"2"}},[t._v("合计")]),t._v(" "),s("th",{staticClass:"bc-yellow"},[t._v("商品种类")]),t._v(" "),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.totalKinds))]),t._v(" "),s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("运费（元）")]),t._v(" "),s("td",{staticClass:"print-hidden",attrs:{colspan:"1"}},[s("el-input",{on:{change:t.changeShipfee},model:{value:t.shipfee,callback:function(e){t.shipfee=e},expression:"shipfee"}})],1),t._v(" "),s("td",{staticClass:"print-show",attrs:{colspan:"1"}},[t._v(t._s(t.value.shipFee))]),t._v(" "),s("th",{staticClass:"bc-yellow",attrs:{colspan:"1"}},[t._v("本页小计（元）")]),t._v(" "),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.totalPrice))])]),t._v(" "),s("tr",[s("th",{staticClass:"bc-yellow"},[t._v("采购数量")]),t._v(" "),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.totalNum))]),t._v(" "),s("th",{staticClass:"bc-yellow",attrs:{colspan:"2"}},[t._v("应收总账款（元）")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.value.totalAmount.toFixed(2)))])])],2)]),t._v(" "),s("div",{staticClass:"padRight"},[t._v("第一联（记账）第二联（库房） 第三联（采购商）")])]),t._v(" "),s("div",{staticClass:"footer"},[s("div",{staticClass:"footer-img"},[s("img",{attrs:{src:"http://haohanshop-file.oss-cn-beijing.aliyuncs.com/merchantFiles/df52d9b3b17643f6916c7d27279a268d/00/20181107/15415868614447adD.png",alt:""}}),t._v(" "),s("p",[t._v("关注公众号，自助下单")])]),t._v(" "),s("div",{staticClass:"right"},[s("div",[s("p",[t._v("♦ 请确认本送货单所填写的信息均与送达您手上的实际物品信息符合")]),t._v(" "),s("p",[t._v("♦ 如您对本次的送货与货物有任何意见和建议，请联系我们：4000-562-180。")]),t._v(" "),s("p",[t._v("♦ 请您在确认本送货单内容均为正确且属实后，进行签字并给予系统评价。")])]),t._v(" "),s("div",{staticClass:"footer-sign"},[s("div",[t._v("签收人：")]),t._v(" "),s("div",[t._v("日期：")])])])]),t._v(" "),s("div",{staticStyle:{"text-align":"center","font-size":"14px",color:"#bbb"}},[t._v("\n                    第"+t._s(t.pageNo)+"页-共"+t._s(t.totalPage)+"页\n                ")])]):t._e(),t._v(" "),s("div",[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":20,total:t.total},on:{"current-change":t.changeNo}})],1),t._v(" "),s("a",{attrs:{id:"bb"},on:{click:t.exportExcel}},[t._v("导出excel")]),t._v(" "),s("a",{attrs:{href:""},on:{click:function(e){return t.printTable("adasd")}}},[t._v("打印")])]),t._v(" "),s("el-tab-pane",{attrs:{label:"极简版",name:"second"}},[s("v-minimalist",{attrs:{value:t.value,"concise-list":t.conciseList,buySeq:t.buySeq,trucks:t.trucks,"truck-index":t.truckIndex,"delivery-date":t.deliveryDate,remarks:t.remarks},on:{refreshRemarks:t.refreshRemarks}})],1),t._v(" "),s("el-tab-pane",{attrs:{label:"简洁版",name:"third"}},[s("v-concise",{attrs:{value:t.value,"concise-list":t.conciseList,buySeq:t.buySeq,trucks:t.trucks,"truck-index":t.truckIndex,"delivery-date":t.deliveryDate,remarks:t.remarks},on:{refreshRemarks:t.refreshRemarks}})],1)],1)],1)},staticRenderFns:[]};var g={data:function(){return{request:new n.a,buySeq:0,options:this.$dic.buySeqOptions,deliveryStatus:this.$dic.deliveryStatus,elPagination:{pageSize:20,pageNo:0},dialogTableVisible:!1,deliveryTableVisible:!1,deliveryTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),orderList:[],trucks:[],total:0,driver:"",buyerId:"",truckNo:"",drivers:[],deliveryTitle:{},deliveryList:[]}},components:{vDelivery:s("C7Lr")(m,y,!1,function(t){s("97DI")},"data-v-027f1fe5",null).exports},watch:{delivery:{handler:function(){},deep:!0}},created:function(){this.truckList(),this.truckBuyerList(),this.driverList()},methods:{exportExcel:function(){l.a.getExcel("ddd","","供应单.xls","bb")},checkSupplierList:function(){this.truckBuyerList()},handleDeliveryClick:function(t,e){this.deliveryTitle=t,this.deliveryTableVisible=!0},handlePageChange:function(t){this.elPagination=t,this.truckBuyerList()},truckBuyerList:function(){var t=this;this.request.truckBuyerList(i()({deliveryDate:this.deliveryTime,buySeq:this.buySeq,driverId:this.driver,buyerId:this.buyerId},this.elPagination)).then(function(e){200==e.code?(t.orderList=e.list,t.total=e.totalRows):(t.orderList=[],t.total=0)})},truckList:function(){var t=this;this.request.truckList().then(function(e){200==e.code?t.trucks=e.ext:t.trucks=[]})},driverList:function(){var t=this;this.request.driverList().then(function(e){200==e.code?t.drivers=e.ext:t.drivers=[]})},goodsReceived:function(){var t=this;this.$confirm("您确认"+(this.deliveryTime+this.options[this.buySeq].label)+"的货已全部接收？").then(function(e){t.request.goodsReceived({deliveryTime:t.deliveryTime,buySeq:t.buySeq}).then(function(e){200===e.code?t.$message.success(e.msg):t.$message.warning(e.msg)})})}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"title"},[s("div",[s("div",{staticClass:"block"},[s("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","default-value":new Date,placeholder:"选择日期"},model:{value:t.deliveryTime,callback:function(e){t.deliveryTime=e},expression:"deliveryTime"}})],1)]),t._v(" "),s("div",[t._v("批次:"),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.buySeq,callback:function(e){t.buySeq=e},expression:"buySeq"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("div",[s("buyer-check",{model:{value:t.buyerId,callback:function(e){t.buyerId=e},expression:"buyerId"}})],1),t._v(" "),s("div",[t._v("司机:"),s("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.driver,callback:function(e){t.driver=e},expression:"driver"}},t._l(t.drivers,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:t.checkSupplierList}},[t._v("查询")])],1),t._v(" "),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:t.goodsReceived}},[t._v("确认已送达")])],1)]),t._v(" "),s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,border:""}},[s("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"buyerName",label:"采购商名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"contact",label:"联系人",width:"100px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"telephone",label:"联系电话",width:"100px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),s("el-table-column",{attrs:{prop:"deliveryTime",label:"批次"}},[[s("div",[t._v(t._s(t.options[t.buySeq].label))])]],2),t._v(" "),s("el-table-column",{attrs:{prop:"genPrice",label:"配送状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t.deliveryStatus[e.row.status].label))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.handleDeliveryClick(e.row,e.$index)}}},[t._v("送货单明细")])]}}])})],1),t._v(" "),s("div",{staticStyle:{"background-color":"#fff","text-align":"right"}},[s("my-pagination",{attrs:{"page-size":t.elPagination.pageSize,"current-page":t.elPagination.pageNo,total:t.total,"page-sizes":[10,20,30,40]},on:{pagechange:t.handlePageChange}})],1),t._v(" "),s("el-dialog",{attrs:{title:"送货单",visible:t.deliveryTableVisible,width:"840px"},on:{"update:visible":function(e){t.deliveryTableVisible=e}}},[t.deliveryTableVisible?s("v-delivery",{attrs:{"delivery-date":t.deliveryTime,"buy-seq":t.buySeq,truckNo:t.truckNo},model:{value:t.deliveryTitle,callback:function(e){t.deliveryTitle=e},expression:"deliveryTitle"}}):t._e()],1)],1)])},staticRenderFns:[]};var C=s("C7Lr")(g,k,!1,function(t){s("a8a3")},"data-v-23530b9b",null);e.default=C.exports},uUNL:function(t,e){}});