webpackJsonp([35],{pKSO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("aA9S"),s=a.n(i),n=a("7tiM"),r=a("W2Dm"),l={name:"basetable",data:function(){return{loading:!1,payStatusOpt:n.a.payStatus,model:{payStatus:"",orderTime:""},request:new r.a,planListModel:{pageNo:"1",pageSize:"30",shopId:"",districtArea:"",communityId:"",deliveryManId:""},orderList:[],date:[],shopList:[],areaList:[],deliveryManList:[],total:0,orderId:""}},created:function(){var e=this;setTimeout(function(){e.getShopList(),e.getAreaList(),e.getDeliveryManList()},0),this.getOrderList()},mounted:function(){},computed:{listModel:function(){var e={beginDate:this.date[0],endData:this.date[1]};return s()(e,this.planListModel)}},methods:{getShopList:function(){var e=this;this.fetchShopList().then(function(t){200==t.code&&(e.shopList=t.ext,e.shopList.push({id:"",shopName:"全部"}))})},getAreaList:function(){var e=this;this.fetchAreaList().then(function(t){200==t.code&&(e.areaList=t.list,e.areaList.push({id:"",name:"全部"}))})},getDeliveryManList:function(){var e=this;this.fetchDeliveryManList().then(function(t){200==t.code&&(e.deliveryManList=t.ext,e.deliveryManList.push({id:"",realName:"全部"}))})},getOrderList:function(){var e=this;this.loading=!0,this.fetchDeliveryOrderList().then(function(t){200==t.code&&(e.total=t.totalRows,e.orderList=t.list)}).finally(function(){e.loading=!1})},newPlan:function(e,t){var a=this;this.orderId=t,this.genDeliveryPlan().then(function(e){200==e.code?a.$utils.showSuccess(a,"重置成功！"):a.$utils.showError(a,e.msg)})},handleSizeChange:function(e){this.planListModel.pageSize=e,this.getOrderList()},handleCurrentChange:function(e){this.planListModel.pageNo=e,this.getOrderList()},fetchShopList:function(){return this.request.fetchShopList()},fetchAreaList:function(){return this.request.fetchAreaList({pageNo:1,pageSize:100})},fetchDeliveryManList:function(){return this.request.fetchDeliveryManList()},fetchDeliveryOrderList:function(){return this.request.fetchDeliveryOrderList(this.listModel)},genDeliveryPlan:function(){return this.request.genDeliveryPlan({orderId:this.orderId})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v(" 配送订单查询")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[e._v("\n            店铺："),a("el-select",{staticClass:"input",attrs:{placeholder:"请选择你要查询的订单状态"},model:{value:e.planListModel.shopId,callback:function(t){e.$set(e.planListModel,"shopId",t)},expression:"planListModel.shopId"}},e._l(e.shopList,function(e){return a("el-option",{key:e.id,attrs:{label:e.shopName,value:e.id}})}),1)],1),e._v(" "),a("div",{staticClass:"handle-box"},[e._v("\n            片区："),a("el-select",{staticClass:"input",attrs:{placeholder:"请选择你要查询的订单状态"},model:{value:e.planListModel.districtArea,callback:function(t){e.$set(e.planListModel,"districtArea",t)},expression:"planListModel.districtArea"}},e._l(e.areaList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("div",{staticClass:"handle-box"},[e._v("    \n            配送员："),a("el-select",{staticClass:"input",attrs:{placeholder:"请选择你要查询的订单状态"},model:{value:e.planListModel.deliveryManId,callback:function(t){e.$set(e.planListModel,"deliveryManId",t)},expression:"planListModel.deliveryManId"}},e._l(e.deliveryManList,function(e){return a("el-option",{key:e.id,attrs:{label:e.realName,value:e.id}})}),1)],1),e._v(" "),a("div",{staticClass:"handle-box"},[a("div",{staticStyle:{display:"inline"}},[a("span",{staticClass:"demonstration"},[e._v("订单日期：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.getOrderList}},[e._v("查询")])],1)]),e._v(" "),a("div",{staticClass:"container marginTop"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.orderList,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"goodsNames",label:"商品详情"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deliveryManName",label:"配送员"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receiverMobile",label:"配送员电话"}}),e._v(" "),a("el-table-column",{attrs:{label:"配送次数/总次数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                        "+e._s(t.row.finishTimes)+"/"+e._s(t.row.totalTimes)+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"planGenStatus",label:"配送计划生成状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e._v("\n                        原因：\n                        "),a("p",[e._v(" "+e._s(t.row.planGenDesc))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.planGenStatus))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"planGenDesc",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deliveryType",label:"配送方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"memberName",label:"客户姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("姓名: "+e._s(t.row.memberName))]),e._v(" "),a("p",[e._v("电话: "+e._s(t.row.receiverMobile))]),e._v(" "),a("p",[e._v("住址: "+e._s(t.row.address))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.memberName))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.newPlan(t.$index,t.row.orderId)}}},[e._v("重新生成配送计划")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.planListModel.pageNo,"page-sizes":[30,40,50],layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.planListModel,"pageNo",t)},"update:current-page":function(t){return e.$set(e.planListModel,"pageNo",t)}}})],1)],1)])},staticRenderFns:[]};var d=a("C7Lr")(l,o,!1,function(e){a("yWR7")},"data-v-7eec6fe6",null);t.default=d.exports},yWR7:function(e,t){}});