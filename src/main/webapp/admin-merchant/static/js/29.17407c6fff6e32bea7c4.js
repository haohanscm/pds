webpackJsonp([29],{NLLe:function(t,e){},QLQ6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("w4pF"),i={name:"basetable",data:function(){return{request:new a.a,loading:!1,payStatusOpt:this.$dic.payStatus,model:{payStatus:"",orderTime:""},elPagination:{pageNo:1,pageSize:20},total:0,checkedItem:{},returnList:[],dialogTableVisible:!1,returnDetailList:[]}},created:function(){this._fetchReturnPage()},methods:{handleSizeChange:function(t){this.elPagination.pageSize=t,this._fetchReturnPage()},handleCurrentChange:function(t){this.elPagination.pageNo=t,this._fetchReturnPage()},viewDetail:function(t){this.dialogTableVisible=!0,this.checkedItem=t,this._fetchReturnDetail(t.id)},confirmReturn:function(t){var e=this;this.$confirm("您确认要将该订单进行退货？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e._confirmReturn({id:t.id})})},deleteProcureReturn:function(t){var e=this;this.$confirm("您确认要删除该退货单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e._deleteProcureReturn({id:t.id})})},_fetchReturnPage:function(){var t=this;this.request.fetchReturnPage(this.elPagination).then(function(e){200==e.code&&(t.returnList=e.list,t.total=e.totalRows)})},_fetchReturnDetail:function(t){var e=this;this.request.fetchReturnDetail({returnId:t,pageSize:1e3}).then(function(t){200==t.code?e.returnDetailList=t.list:e.returnDetailList=[]}).catch(function(t){e.returnList=[]})},_addReturnDetail:function(){this.request.addReturnDetail().then(function(t){t.code})},_confirmReturn:function(){var t=this;this.request.confirmReturn().then(function(e){200==e.code?t.$message.success("退货成功！"):t.$message.warning(e.msg)})},_deleteProcureReturn:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.request.deleteProcureReturn(e).then(function(e){200==e.code?(t.$message.success("删除成功！"),t._fetchReturnPage()):t.$message.warning(e.msg)})}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table"},[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-tickets"}),t._v(" 采购退货")])],1)],1),t._v(" "),n("div",{staticClass:"container marginTop"},[n("div",{staticClass:"handle-box"},[n("router-link",{attrs:{to:"/wareHouse/purchaseReturn_new"}},[n("el-button",{attrs:{type:"primary",icon:"search"}},[t._v("新增退货")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.returnList,border:""}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{prop:"returnNum",label:"单据编号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"supplierName",label:"供应商"}}),t._v(" "),n("el-table-column",{attrs:{prop:"goodsNum",label:"数量"}}),t._v(" "),n("el-table-column",{attrs:{prop:"sumAmount",label:"合计金额"}}),t._v(" "),n("el-table-column",{attrs:{prop:"bizTime",label:"操作时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"order_info",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.viewDetail(e.row)}}},[t._v("查看详情\n                    ")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.confirmReturn(e.row)}}},[t._v("确认退货\n                    ")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.deleteProcureReturn(e.row)}}},[t._v("删除\n                    ")])]}}])})],1),t._v(" "),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"","current-page":t.elPagination.pageNo,"page-sizes":[20,30,40],"page-size":t.elPagination.pageSize,layout:"sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.elPagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.elPagination,"pageNo",e)}}})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"查看库存",visible:t.dialogTableVisible,width:"1000px"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[n("el-row",[n("el-col",{attrs:{span:12}},[t._v("\n                供应商："+t._s(t.checkedItem.supplierName)+"\n            ")]),t._v(" "),n("el-col",{attrs:{span:12}},[t._v("\n                操作时间："+t._s(t.checkedItem.bizTime)+"\n            ")])],1),t._v(" "),n("el-table",{attrs:{"max-height":"500",data:t.returnDetailList}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{property:"barCode",label:"条形码",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{property:"goodsName",label:"商品名",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{property:"attr",label:"规格",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{property:"num",label:"数量",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{property:"unit",label:"单位"}}),t._v(" "),n("el-table-column",{attrs:{property:"price",label:"单价"}})],1),t._v(" "),n("div",[n("el-row",[n("el-col",{attrs:{span:8}},[t._v("\n                    总计金额："+t._s(t.checkedItem.totalAmount)+"\n                ")]),t._v(" "),n("el-col",{attrs:{span:8}},[t._v("\n                    合计金额："+t._s(t.checkedItem.totalAmount)+"\n                ")]),t._v(" "),n("el-col",{attrs:{span:8}},[t._v("\n                    实付金额："+t._s(t.checkedItem.payAmount)+"\n                ")])],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[t._v("\n                    备注信息："+t._s(t.checkedItem.bizNote)+"\n                ")])],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=n("C7Lr")(i,r,!1,function(t){n("NLLe")},"data-v-de2d3eb6",null);e.default=l.exports}});