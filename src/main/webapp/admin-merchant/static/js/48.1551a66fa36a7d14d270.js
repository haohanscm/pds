webpackJsonp([48],{cKSe:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("W2Dm"),o={name:"basetable",components:{vClassification:i("cWdR").a},data:function(){return{shopServiceAreaModel:{shopId:"",deleteItems:[],addItems:[]},addItems:[],deleteItems:[],radio:1,shopName:"",shopList:[],request:new s.a,ctrl:{data:[{name:"1",params:{id:1223}}],request:"fun"},dialogVisible:!1,dialogListVisible:!1}},created:function(){this.renderList()},computed:function(){},methods:{renderList:function(){var t=this;this.getList().then(function(e){200==e.code&&(t.shopList=e.ext)})},openDialogModify:function(t,e){var i=this;this.shopServiceAreaModel.shopId=e,this.shopName=this.shopList[t].shopName,this.dialogVisible=!0,this.fetchAreaList().then(function(t){200==t.code&&(i.ctrl=i.setCtrl(t.list),console.log(i.ctrl))})},modifyList:function(){var t=this;this.shopServiceAreaModel.addItems=[],this.shopServiceAreaModel.deleteItems=[],this.addItems.forEach(function(e){t.shopServiceAreaModel.addItems.push({communityId:e.id,districtId:e.pid})}),this.deleteItems.forEach(function(e){t.shopServiceAreaModel.deleteItems.push({communityId:e.id,districtId:e.pid})}),this.editServiceArea().then(function(e){200==e.code?(t.$utils.showSuccess(t,"添加成功"),t.addItems=[],t.deleteItems=[],t.dialogListVisible=!1):(t.$utils.showErr(t,e.msg),t.dialogListVisible=!1)})},setCtrl:function(t){var e=this,i=this,s={data:[]};return t.forEach(function(t){s.data.push({title:t.name,params:{districtId:t.id,shopId:e.shopServiceAreaModel.shopId}})}),s.request=function(t){return i.queryShopServiceCommunity(t)},s},showDetail:function(){this.dialogVisible=!1,this.dialogListVisible=!0},checkCommunity:function(t){var e=this;this.deleteItems=[],this.addItems=[],t.forEach(function(t){"del"==t.type?e.deleteItems.push(t):"add"==t.type&&e.addItems.push(t)}),console.log(t)},getList:function(){return this.request.fetchShopList()},queryShopServiceArea:function(){return this.request.queryShopServiceArea(this.shopServiceAreaModel)},queryShopServiceCommunity:function(t){return this.request.queryShopServiceCommunity(t)},editServiceArea:function(){return this.request.editServiceArea(this.shopServiceAreaModel)},fetchAreaList:function(){return this.request.fetchAreaList({pageSize:30,pageNo:1})}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table"},[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-tickets"}),t._v(" 店铺服务区域查看")])],1)],1),t._v(" "),i("div",{staticClass:"container marginTop"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.shopList,border:""}},[i("el-table-column",{attrs:{prop:"shopName",fit:"",label:"店铺名"}}),t._v(" "),i("el-table-column",{attrs:{prop:"order_type",fit:"",label:"店铺负责人"}}),t._v(" "),i("el-table-column",{attrs:{prop:"shopTel",fit:"",label:"店铺电话"}}),t._v(" "),i("el-table-column",{attrs:{prop:"shopAddress",fit:"",label:"店铺地址"}}),t._v(" "),i("el-table-column",{attrs:{prop:"serviceDistricts",fit:"",label:"服务片区"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-popover",{attrs:{trigger:"hover",placement:"top"}},[i("p",{staticStyle:{display:"block","max-width":"200px"}},[t._v(t._s(e.row.serviceDistricts))]),t._v(" "),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("div",{staticClass:"single-line cursor-pointer"},[t._v(t._s(e.row.serviceDistricts))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"serviceCommunitys",fit:"",label:"服务小区"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-popover",{attrs:{trigger:"hover",placement:"top"}},[i("p",{staticStyle:{display:"block","max-width":"200px"}},[t._v(t._s(e.row.serviceCommunitys))]),t._v(" "),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("div",{staticClass:"single-line cursor-pointer"},[t._v(t._s(e.row.serviceCommunitys))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"pay_channel",fit:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{display:"flex"}},[i("el-button",{attrs:{type:"danger"},on:{click:function(i){return t.openDialogModify(e.$index,e.row.id)}}},[t._v("修改")])],1)]}}])})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.shopName,visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.dialogVisible?i("v-classification",{attrs:{ctrl:t.ctrl},on:{checked:t.checkCommunity}}):t._e(),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.showDetail}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.shopName,visible:t.dialogListVisible,width:"960px"},on:{"update:visible":function(e){t.dialogListVisible=e}}},[i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"show-item"},[t._v("\n                删除的小区\n                "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.deleteItems}},[i("el-table-column",{attrs:{prop:"name",label:"小区名",width:"240"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{display:"flex"}},[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.deleteItems.splice(e.$index,1)}}},[t._v("从列表中移除")])],1)]}}])})],1)],1),t._v(" "),i("div",{staticClass:"show-item"},[t._v("\n                添加的小区\n                "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.addItems}},[i("el-table-column",{attrs:{prop:"name",label:"小区名",width:"240",fit:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:"操作",fit:"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{display:"flex"}},[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.addItems.splice(e.$index,1)}}},[t._v("从列表中移除")])],1)]}}])})],1)],1)]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogListVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.modifyList}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var l=i("C7Lr")(o,a,!1,function(t){i("uv6N")},"data-v-3d8ede20",null);e.default=l.exports},uv6N:function(t,e){}});